{"version":3,"sources":["../../src/pages/login/login.module.ts","../../src/pages/login/login.ts"],"names":[],"mappings":"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","file":"2.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\n\r\nimport { LoginPage } from './login';\r\n\r\n/**\r\n * Class LoginPageModule\r\n */\r\n@NgModule({\r\n  declarations: [\r\n    LoginPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(LoginPage),\r\n    TranslateModule,\r\n  ],\r\n  exports: [\r\n    LoginPage,\r\n  ],\r\n})\r\nexport class LoginPageModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import { Component } from '@angular/core';\r\nimport { HttpParams } from '@angular/common/http';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { Validators, FormBuilder, FormGroup } from '@angular/forms';\r\nimport { IonicPage, NavController, NavParams, LoadingController, ToastController } from 'ionic-angular';\r\n\r\nimport { MainPage } from '..';\r\nimport { User } from '../../providers';\r\n\r\n/**\r\n * Class LoginPage\r\n */\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-login',\r\n  templateUrl: 'login.html',\r\n})\r\nexport class LoginPage {\r\n  private login_form: FormGroup;\r\n  private loading: any;\r\n  private toast: any;\r\n  private loginErrorString: string;\r\n  private loginLoadingString: string;\r\n  passwordType: string = 'password';\r\n  passwordIcon: string = 'eye-off';\r\n\r\n  /**\r\n   * constructor LoginPage\r\n   * @param user User\r\n   * @param navParams NavParams\r\n   * @param navCtrl NavController\r\n   * @param formBuilder FormBuilder\r\n   * @param toastCtrl ToastController\r\n   * @param loadingCtrl LoadingController\r\n   * @param translateService TranslateService\r\n   */\r\n  constructor(\r\n    public user: User,\r\n    public navParams: NavParams,\r\n    public navCtrl: NavController,\r\n    public formBuilder: FormBuilder,\r\n    public toastCtrl: ToastController,\r\n    public loadingCtrl: LoadingController,\r\n    public translateService: TranslateService,\r\n  ) {\r\n    this.translateService.get([\r\n      'LOADING',\r\n      'LOGIN.ERROR'\r\n    ]).subscribe((value) => {\r\n      this.loginLoadingString = value['LOADING'];\r\n      this.loginErrorString = value['LOGIN.ERROR'];\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Method ionViewDidEnter\r\n   */\r\n  ionViewDidEnter() {\r\n    this.isLoggedIn();\r\n  }\r\n\r\n  /**\r\n   * Method ionViewWillLoad\r\n   */\r\n  ionViewWillLoad() {\r\n    this.login_form = this.formBuilder.group({\r\n      username: ['', Validators.compose([\r\n        Validators.pattern('^[_A-Za-z0-9-\\\\+]+(\\\\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\\\\.[A-Za-z0-9]+)*(\\\\.[A-Za-z]{2,})$'),\r\n        Validators.required\r\n      ])],\r\n      password: ['', Validators.compose([\r\n        Validators.minLength(5),\r\n        Validators.required\r\n      ])],\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Method doLogin\r\n   */\r\n  public doLogin() {\r\n    this.showLoader(this.loginLoadingString);\r\n\r\n    let grant_type: string = \"password\";\r\n    let client_id: string = \"099153c2625149bc8ecb3e85e03f0022\";\r\n\r\n    const body = new HttpParams()\r\n      .append('grant_type', grant_type)\r\n      .append('client_id', client_id)\r\n      .append('username', this.login_form.value.username)\r\n      .append('password', this.login_form.value.password);\r\n\r\n    this.user.login(body).subscribe((result) => {\r\n      this.loading.dismiss();\r\n\r\n      console.log(result);\r\n\r\n      this.navCtrl.setRoot(MainPage);\r\n    }, (error) => {\r\n      this.loading.dismiss();\r\n\r\n      console.log(error);\r\n\r\n      this.showToast(this.loginErrorString);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Method hideShowPassword\r\n   */\r\n  hideShowPassword() {\r\n    this.passwordType = this.passwordType === 'text' ? 'password' : 'text';\r\n    this.passwordIcon = this.passwordIcon === 'eye-off' ? 'eye' : 'eye-off';\r\n  }\r\n\r\n  /**\r\n   * Function showLoader\r\n   * @param message string\r\n   */\r\n  private showLoader(message) {\r\n    this.loading = this.loadingCtrl.create({\r\n      content: message,\r\n    });\r\n\r\n    this.loading.present();\r\n  }\r\n\r\n  /**\r\n   * Function showToast\r\n   * @param message string\r\n   */\r\n  private showToast(message) {\r\n    this.toast = this.toastCtrl.create({\r\n      message: message,\r\n      duration: 6000,\r\n      position: 'top',\r\n    });\r\n\r\n    this.toast.present();\r\n  }\r\n\r\n  /**\r\n   * Method isLoggedIn\r\n   */\r\n  private isLoggedIn() {\r\n    this.showLoader(this.loginLoadingString);\r\n\r\n    this.user.getToken().then((response) => {\r\n      if (response) {\r\n        this.loading.dismiss();\r\n        this.navCtrl.setRoot(MainPage);\r\n      } else {\r\n        this.loading.dismiss();\r\n      }\r\n    }, (error) => {\r\n      console.log(error);\r\n\r\n      this.loading.dismiss();\r\n    });\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts"],"sourceRoot":""}